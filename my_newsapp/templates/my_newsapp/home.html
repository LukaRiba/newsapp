{% extends "base.html" %}

{% load staticfiles thumbnail %}

{% block title %}Latest Articles{% endblock title %}

{% block style %}
  {{ block.super }}
{% endblock style %}

{% block jumbo %}
<div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-4">Welcome to Newsapp </h1>
      <p class="lead">Everything you need to share your knowledge...</p>
    </div>
  </div>
{% endblock jumbo %}

{% block navbar_categories_dropdown %}
  {% comment %} categories list {% endcomment %}
  <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
    {% for category in categories %}
      {% comment %} are there articles in a category? If yes, create category submenu {% endcomment %}
      {% if category.articles.all %}
        <li class="dropdown-submenu">
          <a class="dropdown-item dropdown-toggle" href="{{ category.get_absolute_url }}">{{ category.title }}</a>
          {% comment %} list of categorie's articles {% endcomment %}
          <ul class="dropdown-menu">
            {% for article in category.articles.all %}
              <li>
                <a class="dropdown-item" href="{{ article.get_absolute_url }}">{{ article.title }}</a>
              </li>
            {% endfor %}
          </ul>
        </li>  
      {% endif %}       
    {% endfor %}
  </ul>
{% endblock navbar_categories_dropdown %}

{% block content %}
  <div class="container">
    <h1 class="padding-top-30 padding-bottom-30 text-cornflowerblue">Latest Articles</h1>
    <hr>
  </div>
  {% for article in articles  %}
    <div class="container">
      <div class="row padding-top-20 padding-bottom-20">
        <div class="col-md-2">
          <img src="{% thumbnail article.image 150x150 crop %}">
        </div>
        <div class="col-md-6">
          <h3><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></h3>
          <p>{{ article.short_description }}</p>
        </div>
        <div class="col-md-4 text-lightbrown padding-top-20 text-right">
          <p>Category: {{ article.category }}</p>
          <p>Written by {{ article.author }}</p>
          <p>{{ article.pub_date.date }}</p> {% comment %} date() metoda vraÄ‡a samo datum; bez nje ispisuje se i datum i vrijeme {% endcomment %}
        </div>
      </div>
      <hr>
    </div>
  {% endfor %}
{% endblock content %}

{% block script %}
  {{ block.super }}
  <script src="{% static 'my_newsapp/script.js' %}"></script>
{% endblock script %}
{% extends "base.html" %}

{% load staticfiles thumbnail %}

{% block title %}News Home{% endblock title %}

{% block style %}
  {{ block.super }}
{% endblock style %}

{% block jumbo %}
<div class="jumbotron jumbotron-fluid">
    <div class="container">
      <h1 class="display-4">
        {% if user.is_authenticated %}
          Welcome to Newsapp {{ request.user }}
        {% else %}
          Welcome to Newsapp guest
        {% endif %}
      </h1>
      <p class="lead">Everything you need to share your knowledge...</p>
    </div>
  </div>
{% endblock jumbo %}

{% block navigation %}
  {% include "my_newsapp/snippets/navigation.html" %}
{% endblock navigation %}

{% block content %}
  <div class="container home mt-60px mb-80px">
      <div class="row">
        <div class="col border-right"> <!-- Left main column start - Primary category articles -->
          <h1 class="pb-3" style="font-weight: 700">
            <a class="cat-title scroll-to-top" href="{{ primary_category.get_absolute_url }}">{{ primary_category.title }}</a>
          </h1>
          {% for article in primary_category.articles.all|slice:':3' %}
            <div class="row padding-top-20 padding-right-20 border-bottom-shorter">

              <div class="col-xl-3 col-lg-4 col-md-5 pt-2 pr-0">
                <!-- image container -->
                <div class="article-thumbnail-image" style="background-image: url('{{ article.images.first.image.url }}');"></div>
              </div>

              <div class="col-xl-9 col-lg-8 col-md-7 article-preview"> 
                <div class="row pl-3 title">
                  <h3><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></h3>
                </div>
                <div class="row pl-3 text-lightbrown pub-date">
                  <p style="margin-bottom: 5px;">{{ article.pub_date.date }}</p>
                </div>
                <div class="row pl-3 short-description">
                  <p style="color: rgb(63, 63, 63)">{{ article.short_description }}</p>
                </div>                                              
              </div> 

            </div>
          {% endfor %}
        </div> <!-- Left main column end - Primary category articles -->
        <div class="col-md-5 mt-1 pl-4 ml-4" style="height: 746px;"> <!-- Right main column start  -->
          <div class="row secondary-articles" style="height: 375px">  <!-- Secondary articles start  -->
            <h2 class="pb-3" style="font-weight: 500">
              <a class="cat-title scroll-to-top" href="{{ secondary_category.get_absolute_url }}">{{ secondary_category.title }}</a>
            </h2>
            {% for article in secondary_category.articles.all|slice:':2'  %}
            <div class="row padding-right-20 pb-3">                    
              <div class="col-md-12 article-preview" style="max-height: 150px;">
                <div class="row pl-3 title">
                  <h4><a href="{{ article.get_absolute_url }}">{{ article.title }}</a></h4>
                </div>
                <div class="row pl-3 text-lightbrown pub-date">
                  <p style="margin-bottom: 5px;">{{ article.pub_date.date }}</p>
                </div>
                <div class="row pl-3 short-description max-lines" style="color: rgb(63, 63, 63); font-size: 14px;">
                  <p>{{ article.short_description }}</p>
                </div>                                              
              </div>            
            </div>
            {% endfor %}
          </div> <!-- Secondary articles end -->
        <hr class="mt-0">
          <div class="row other-articles"> <!-- other articles start  -->
              {% for article in other_articles|slice:':6' %}
                {% if forloop.counter == 1   %}
                {% comment %} openning left column div {% endcomment %}
                <div id=otherArticlesLeftColumn class="col-md-6 border-right" style="height: 354px">
                  {% include 'my_newsapp/snippets/other_article.html' %}
                {% elif forloop.counter == 2 or forloop.counter == 3 %}
                  {% include 'my_newsapp/snippets/other_article.html' %}  
                {% elif forloop.counter == 4 %}
                </div>   {% comment %} closing left column div {% endcomment %}
                {% comment %} openning right column div {% endcomment %}
                <div id=otherArticlesRightColumn class="col-md-6 pl-4" style="height: 354px">
                  {% include 'my_newsapp/snippets/other_article.html' %}
                {% elif forloop.counter == 5 %} 
                  {% include 'my_newsapp/snippets/other_article.html' %}  
                {% elif forloop.counter == 6 %} 
                  {% include 'my_newsapp/snippets/other_article.html' %}  
                </div>  {% comment %} closing right column div {% endcomment %}
                {% endif %}  
              {% endfor %}
          </div> {% comment %} end of other articles  {% endcomment %}
        </div> {% comment %} end of right column  {% endcomment %}
      </div>
  </div>
{% endblock content %}

{% block script %}
  {{ block.super }}
  <script src="{% static 'my_newsapp/home.js' %}"></script>
{% endblock script %}
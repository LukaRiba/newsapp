{% load staticfiles comments_tags %}

<!-- <link rel="stylesheet" href="{% static 'css/bootstrap-4.0.0.css' %}">
<link rel="stylesheet" href="{% static 'comments/css/comments.css' %}"> -->

<!-- for access total comments number in .js files -->
<script>var commentsCount = Number("{{ comments.count }}")</script>

<div id="error-log"></div>

<div class="comments-body">
  <h4 id="title" class="mb-3">Comments</h4>
  {% if comments %}
    {% if comments.count == 1 %}
    <p id="comments-counter"><strong>{{ comments.count }} comment</strong></p>
    {% else %}
    <p id="comments-counter"><strong>{{ comments.count }} comments</strong></p>
    {% endif %}
  {% endif %}

  {% if request.user.is_authenticated %}
    {% include "comments/comment_form.html" %}
  {% else %}
    <h5><a href="{{ login_url }}?next={{request.path}}">Login</a> to comment.</h5>
  {% endif %}
  
  <div class="margin-bottom-30"></div>

  <div id="comments">
    {% if comments %}
      {% include "comments/comments.html" %}
      <div id="load-more-button-container">
        {% if comments.count >= 15 %}
          <button class="load-more-comments btn-md btn-primary">Load 10 more Comments</button>
        {% elif comments.count > 6  %}
          <button class="load-more-comments btn-md btn-primary">Load {{ comments|substract:5 }} more Comments</button>
        {% elif comments.count == 6 %}
          <button class="load-more-comments btn-md btn-primary">Load 1 more Comment</button>
        {% endif %}
      </div>
    {% else %}
      <p id="no-comments-yet-message">No comments yet.</p>
    {% endif %}
  </div>
</div>

<!-- <script src="{% static 'js/jquery-3.3.1.js' %}"></script>
<script src="{% static 'js/bootstrap-4.0.0.js' %}"></script> -->

<!-- veoma bitno: type="module"  -> inače import u main.js-u ne radi ! -->
<!-- <script type="module" src="{% static 'comments/js/main.js' %}"></script> -->